<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feedback – Physicstutors.org</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>

  <header>
    <ul class="navbar">
      <li><a href="index.html">🏠 Home</a></li>
      <li><a href="about.html">👤 About</a></li>
      <li><a href="physics-tutoring.html">📘 Physics Tutoring</a></li>
      <li><a href="cloud-devops.html">💻 Cloud DevOps</a></li>
      <li><a href="docker-github.html">🐳 GitHub & DockerHub</a></li>
      <li><a href="resume.html">📄 My Resume</a></li>
      <li><a href="homeworkhelpsubmission.html">📝 Homework Help</a></li>
      <li>
        <a href="signup.html" style="background-color: #0077cc; border-radius: 5px;">✍️ Sign Up</a>
        <ul class="dropdown-content">
          <li><a href="feedback.html">💬 Feedback</a></li>
        </ul>
      </li>
    </ul>
  </header>

  <main class="content">
    <h1 style="text-align:center;">We Value Your Feedback</h1>
    <form id="feedbackForm">
      <label for="name">Full Name:</label>
      <input type="text" id="name" name="name" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="experience">How was your experience?</label>
      <textarea id="experience" name="experience" rows="5" required></textarea>

      <label for="suggestions">Any suggestions?</label>
      <textarea id="suggestions" name="suggestions" rows="4"></textarea>

      <button type="submit">Submit Feedback</button>
    </form>
    <div id="status" style="margin-top: 1rem; font-weight: bold;"></div>
  </main>

  <footer>
    <p>Contact: physicstutors.org | Phone: 857-399-7810</p>
  </footer>

  <script>
    document.getElementById('feedbackForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const status = document.getElementById('status');
      status.style.color = 'blue';
      status.textContent = '⏳ Sending your feedback... Please wait.';

      const data = {
        action: 'feedback', // ✅ Required to differentiate in Lambda
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        experience: document.getElementById('experience').value.trim(),
        suggestions: document.getElementById('suggestions').value.trim()
      };

      try {
        const response = await fetch('https://qip7wx4z55.execute-api.us-east-1.amazonaws.com/production/feedback', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`Server error: ${errorText || response.status}`);
        }

        status.style.color = 'green';
        status.textContent = '✅ Feedback submitted successfully! Thank you.';
        e.target.reset();
      } catch (err) {
        console.error(err);
        status.style.color = 'red';
        status.textContent = `❌ Error: ${err.message}`;
      }
    });
  </script>
</body>
</html>
