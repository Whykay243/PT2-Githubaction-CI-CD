<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign Up – Physicstutors.org</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <header>
    <ul class="navbar">
      <li><a href="index.html">🏠 Home</a></li>
      <li><a href="about.html">👤 About</a></li>
      <li><a href="physics-tutoring.html">📘 Physics Tutoring</a></li>
      <li><a href="cloud-devops.html">💻 Cloud DevOps</a></li>
      <li><a href="docker-github.html">🐳 GitHub & DockerHub</a></li>
      <li><a href="resume.html">📄 My Resume</a></li>
      <li><a href="homeworkhelpsubmission.html">📝 Homework Help</a></li>
      <li class="dropdown">
        <a href="signup.html" class="dropbtn">✍️ Sign Up</a>
        <div class="dropdown-content">
          <a href="feedback.html">🗣️ Feedback</a>
        </div>
      </li>
    </ul>
  </header>

  <main class="content">
    <h1 style="text-align:center;">Sign Up for Tutoring</h1>
    <form id="signupForm" action="#" method="POST">
      <label for="name">Full Name:</label>
      <input type="text" id="name" name="name" required>

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="gradeLevel">Grade Level:</label>
      <input type="text" id="gradeLevel" name="gradeLevel" required>

      <label for="subjectHelpNeeded">Subject Help Needed:</label>
      <textarea id="subjectHelpNeeded" name="subjectHelpNeeded" rows="4" required></textarea>

      <button type="submit">Submit</button>
    </form>
    <div id="status" style="margin-top: 1rem; font-weight: bold;"></div>
  </main>

  <footer>
    <p>Contact: physicstutors.org | Phone: 857-399-7810</p>
  </footer>

  <script>
    document.getElementById('signupForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const status = document.getElementById('status');
      status.style.color = 'blue';
      status.textContent = '⏳ Sending your signup... Please wait.';

      const data = {
        action: 'signup', // REQUIRED by Lambda
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        gradeLevel: document.getElementById('gradeLevel').value.trim(),
        subjectHelpNeeded: document.getElementById('subjectHelpNeeded').value.trim()
      };

      try {
        const response = await fetch('http://54.208.17.95:3000/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`Server error: ${errorText || response.status}`);
        }

        status.style.color = 'green';
        status.textContent = '✅ Signup submitted successfully! Thank you.';
        e.target.reset();
      } catch (err) {
        console.error(err);
        status.style.color = 'red';
        status.textContent = `❌ Error: ${err.message}`;
      }
    });
  </script>
</body>
</html>
